[{"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\index.js":"1","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\reportWebVitals.js":"2","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\App.js":"3","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\nav.js":"4","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\management.js":"5","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\topic.js":"6","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\feed.js":"7","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\form.js":"8","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\room.js":"9","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\options.js":"10","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\post.js":"11","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\member.js":"12"},{"size":500,"mtime":499162500000,"results":"13","hashOfConfig":"14"},{"size":362,"mtime":499162500000,"results":"15","hashOfConfig":"14"},{"size":10695,"mtime":1610234641208,"results":"16","hashOfConfig":"14"},{"size":8253,"mtime":1610228089210,"results":"17","hashOfConfig":"14"},{"size":663,"mtime":1610226500813,"results":"18","hashOfConfig":"14"},{"size":1882,"mtime":1610234935948,"results":"19","hashOfConfig":"14"},{"size":970,"mtime":1610225994089,"results":"20","hashOfConfig":"14"},{"size":4544,"mtime":1610235136388,"results":"21","hashOfConfig":"14"},{"size":1470,"mtime":1610223881057,"results":"22","hashOfConfig":"14"},{"size":2068,"mtime":1610225074531,"results":"23","hashOfConfig":"14"},{"size":2229,"mtime":1610226134487,"results":"24","hashOfConfig":"14"},{"size":2048,"mtime":1610224617624,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"16mdmp9",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"28"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"40","usedDeprecatedRules":"28"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\index.js",[],["54","55"],"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\reportWebVitals.js",[],"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\App.js",["56","57","58","59","60","61","62"],"import popfile from './media/pop.wav';\r\nimport { Nav } from './components/nav';\r\nimport { Feed } from './components/feed';\r\nimport { Topic } from './components/topic';\r\nimport { Management } from './components/management';\r\nimport { Form } from './components/form';\r\nimport logo from './logo.svg';\r\nimport React, { useState, useEffect } from 'react';\r\nimport socketIOClient from \"socket.io-client\";\r\nimport './App.css';\r\nimport styled from 'styled-components';\r\n\r\nconst ENDPOINT = \"https://www.talkbubble.org:4001\";\r\n//const ENDPOINT = \"http://127.0.0.1:4001\";\r\n\r\nconst socket = socketIOClient(ENDPOINT, { secure: true });\r\n\r\nwindow.nickname = '';\r\n\r\n// shift and lastkey variables used for tracking shift+enter command in chat input\r\nwindow.shift = false;\r\nwindow.lastKey = '';\r\n\r\nconst ImageCC = styled.div`\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  color: var(--talkbubble-yellow);\r\n  font-size: 14px;\r\n  padding-left: 15px;\r\n  opacity: 0.5;\r\n  @media(max-width: 768px) {\r\n    display: none;\r\n    margin-bottom: 120px; \r\n    position: relative;\r\n    z-index: -1;\r\n    text-align: center;\r\n  }\r\n`\r\n\r\nconst MainRow = styled.div`\r\n  background-color: var(--talkbubble-blue);\r\n  box-shadow: var(--talkbubble-shadow);\r\n  border-radius: 10px;\r\n  margin: 15px;\r\n  @media(max-width: 768px) {\r\n    margin: 5px;\r\n  }\r\n`\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeMember: '', \r\n      location: 'feed',\r\n      members: [],\r\n      msg: '',\r\n      muteList: [],\r\n      nickname: '',\r\n      nicknameTemp: '',\r\n      posts: [],\r\n      topic: '',\r\n      transitioningTopic: false,\r\n      updatingNickname: false,\r\n    }\r\n\r\n    this.manageMember     = this.manageMember.bind(this);\r\n    this.toggleMute       = this.toggleMute.bind(this);\r\n    this.handleChange     = this.handleChange.bind(this);\r\n    this.chat             = this.chat.bind(this);\r\n    this.directMessage    = this.directMessage.bind(this);\r\n    this.changeNickname   = this.changeNickname.bind(this);\r\n    this.nicknameReject   = this.nicknameReject.bind(this);\r\n    this.nicknameAccept   = this.nicknameAccept.bind(this);\r\n    this.nicknameUpdate   = this.nicknameUpdate.bind(this);\r\n    this.setFeedRef       = this.setFeedRef.bind(this);\r\n    this.setLocation      = this.setLocation.bind(this);\r\n  }\r\n\r\n  setFeedRef(ref) {\r\n    this.feedRef = ref;\r\n  }\r\n\r\n  setLocation(loc) {\r\n    this.setState({ location: loc });\r\n  }\r\n\r\n  manageMember(member) {\r\n    if (member === this.state.activeMember) {\r\n      this.setState({\r\n        activeMember: '',\r\n      })\r\n    } else {\r\n      this.setState({\r\n        activeMember: member,\r\n      });\r\n    }\r\n  }\r\n\r\n  toggleMute() {\r\n    let muted = false;\r\n    const muteListClone = [...this.state.muteList];\r\n    for (let i = 0; i < muteListClone.length; i) {\r\n      if (muteListClone[i] === this.state.activeMember) {\r\n        muteListClone.splice(i, 1);\r\n        muted = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (!muted) muteListClone.push(this.state.activeMember);\r\n\r\n    this.setState({muteList: muteListClone});\r\n  }\r\n  \r\n  handleChange(e) {\r\n    if (window.lastKey === 'Enter' && !window.shift) return;\r\n    if (e.target.value.length <= 256) {\r\n      this.setState({ msg: e.target.value });\r\n    } else {\r\n      this.setState({ msg: e.target.value.substring(0, 256) })\r\n    }\r\n  }\r\n\r\n  changeNickname(e) {\r\n    if (e.target.value.length <= 32) {\r\n      this.setState({ nicknameTemp: e.target.value })\r\n    } else {\r\n      this.setState({ nicknameTemp: e.target.value.substring(0, 32) })\r\n    }\r\n    \r\n  }\r\n\r\n  nicknameUpdate() {\r\n    this.setState({ \r\n      nicknameTemp: this.state.nickname,\r\n      updatingNickname: true \r\n    });\r\n  }\r\n\r\n  nicknameAccept() {\r\n    socket.emit('change nickname', { memberId: window.memberId, nickname: this.state.nicknameTemp})\r\n    this.setState({ \r\n      nickname: this.state.nicknameTemp,\r\n      updatingNickname: false \r\n    })\r\n  }\r\n\r\n  nicknameReject() {\r\n    this.setState({\r\n      updatingNickname: false\r\n    })\r\n  }\r\n  chat() {\r\n    if (this.state.msg.length < 1) return;\r\n    socket.emit('chat', {\r\n      msg: this.state.msg,\r\n      member: window.memberId,\r\n      nickname: window.nickname,\r\n    })\r\n    this.setState({ msg: '' });\r\n  }\r\n\r\n  directMessage() {\r\n    let msg = this.state.msg;\r\n    msg = this.state.activeMember + ' ' + msg;\r\n    this.setState({ msg, location: 'feed' })\r\n  }\r\n\r\n  componentDidMount() {\r\n    const _state = this.state;\r\n    const pop = new Audio(popfile);\r\n\r\n    socket.emit('join', (member, members) => {\r\n      window.memberId = member;\r\n      window.nickname = '';\r\n      members.forEach((member) => {\r\n        member.active = false;\r\n      })\r\n      this.setState({\r\n        members: members,\r\n      });\r\n    });\r\n\r\n    const link = document.createElement(\"link\");\r\n    link.rel = \"stylesheet\";\r\n    link.href = \"https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css\";\r\n    document.head.appendChild(link);\r\n\r\n    const gfonts = document.createElement('link');\r\n    gfonts.rel = 'preconnect';\r\n    gfonts.href = 'https://fonts.gstatic.com';\r\n    document.head.appendChild(gfonts);\r\n\r\n    const montserrat = document.createElement('link');\r\n    montserrat.rel = 'stylesheet';\r\n    montserrat.href = 'https://fonts.googleapis.com/css2?family=Montserrat&display=swap';\r\n    document.head.appendChild(montserrat);\r\n\r\n\r\n    \r\n    window.addEventListener('keydown', e => {\r\n      if (e.repeat) return;\r\n      if (e.key === \"Shift\") {\r\n        window.shift = true;\r\n      }\r\n      window.lastKey = e.key;\r\n      if (e.key === 'Enter' && !window.shift) {\r\n        if (this.state.updatingNickname) {\r\n          this.nicknameAccept();\r\n        } else {\r\n          this.chat();\r\n        }\r\n      }\r\n    });\r\n\r\n    window.addEventListener('keyup', e => {\r\n      if (e.key === \"Shift\") {\r\n        window.shift = false;\r\n      }\r\n    });\r\n    \r\n    const appendMember = (data) => {\r\n      data.active = false;\r\n      const membersClone = [...this.state.members];\r\n      membersClone.push(data);\r\n      this.setState({\r\n        members: membersClone,\r\n      })\r\n    }\r\n\r\n    const removeMember = (member) => {\r\n      const membersClone = [...this.state.members];\r\n      for (let i = 0; i < membersClone.length; i++) {\r\n        if (membersClone[i].id === member) {\r\n          membersClone.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n      this.setState({\r\n        members: membersClone,\r\n      })\r\n    }\r\n\r\n    const appendChat = (data) => {\r\n      let lockScroll = false;\r\n      if (this.feedRef) lockScroll = Math.abs(this.feedRef.scrollHeight - this.feedRef.scrollTop - this.feedRef.clientHeight) < 100;\r\n      const postsClone = [...this.state.posts];\r\n      postsClone.push(data);\r\n      this.setState({\r\n        posts: postsClone,\r\n      });\r\n      if (this.feedRef && lockScroll) this.feedRef.scrollTop = this.feedRef.scrollHeight;\r\n      pop.play();\r\n    }\r\n\r\n    const _this = this;\r\n    const switchTopic = (topic) => {\r\n      const newTopic = function(newTopic) {\r\n        _this.setState({\r\n          topic,\r\n          transitioningTopic: false,\r\n        })\r\n      }\r\n      this.setState({ transitioningTopic: true });\r\n      setTimeout(newTopic, 1000);\r\n    }\r\n\r\n    const changeMemberNickname = (data) => {\r\n      console.log(data);\r\n      const membersClone = [...this.state.members];\r\n      membersClone.forEach((member) => {\r\n        if (member.id === data.memberId) {\r\n          member.nickname = data.nickname;\r\n        }\r\n      });\r\n      this.setState({ members: membersClone })\r\n    }\r\n\r\n    socket.on('chat', function(data){\r\n      appendChat(data);\r\n    });\r\n\r\n    socket.on('new member', function(data){\r\n      appendMember(data);\r\n    });\r\n\r\n    socket.on('member left', function(member) {\r\n      removeMember(member);\r\n    });\r\n\r\n    socket.on('change topic', function(topic) {\r\n      switchTopic(topic);\r\n    });\r\n\r\n    socket.on('change nickname', function(data) {\r\n      changeMemberNickname(data);\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Nav location={this.state.location} setLocation={this.setLocation} />\r\n        <div className=\"container backdrop\">\r\n          <MainRow className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <Topic \r\n                  topic={this.state.topic}\r\n                  transitioningTopic={this.state.transitioningTopic}\r\n                />\r\n            </div>\r\n            <div className={\"col-md-7 order-md-2 feed-col \" + (this.state.location === 'feed' ? 'active' : '')}>\r\n              <div className=\"column-content\">\r\n                <Feed \r\n                  muteList={this.state.muteList}\r\n                  posts={this.state.posts}\r\n                  members={this.state.members}\r\n                  activeMember={this.state.activeMember}\r\n                  setFeedRef={this.setFeedRef}\r\n                  manageMember={this.manageMember}\r\n                />\r\n                <Form \r\n                  msg={this.state.msg}\r\n                  handleChange={this.handleChange}\r\n                  onSubmit={this.chat}\r\n                  nickname={this.state.nickname}\r\n                  nicknameTemp={this.state.nicknameTemp}\r\n                  changeNickname={this.changeNickname}\r\n                  nicknameUpdate={this.nicknameUpdate}\r\n                  nicknameAccept={this.nicknameAccept}\r\n                  nicknameReject={this.nicknameReject}\r\n                  updatingNickname={this.state.updatingNickname}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className={\"col-md-5 order-md-1 mgmt-col \" + (this.state.location === 'mgmt' ? 'active' : '')}>\r\n              <div className=\"column-content\">\r\n                <Management \r\n                  members={this.state.members}\r\n                  manageMember={this.manageMember}\r\n                  activeMember={this.state.activeMember}\r\n                  toggleMute={this.toggleMute}\r\n                  directMessage={this.directMessage}\r\n                  muteList={this.state.muteList}\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n          </MainRow>\r\n        </div>\r\n        <ImageCC className=\"image-CC\">\r\n          <a target=\"_blank\" href=\"https://www.flickr.com/photos/35468147887@N01/14018311\">“sea life”</a> by&nbsp;\r\n          <a target=\"_blank\" href=\"https://www.flickr.com/photos/hodgers/\">Tom Hodgkinson</a> is licensed under&nbsp;\r\n          <a target=\"_blank\" href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC BY-SA 2.0.</a> \r\n        </ImageCC>\r\n        <script src=\"/socket.io/socket.io.js\"></script>\r\n      </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\nav.js",[],"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\management.js",[],"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\topic.js",["63"],"import styled from 'styled-components';\r\n\r\nconst TopicElem = styled.div`\r\n  color: var(--talkbubble-yellow);\r\n  margin-top: 15px;\r\n  position: relative;\r\n  z-index: 1;\r\n  @media(max-width: 768px) {\r\n    padding: 0;\r\n  }\r\n`\r\n\r\nconst TopicHeader = styled.h5`\r\n  padding: 0 15px;\r\n  font-weight: bold;\r\n  font-size: 12px;\r\n  line-height: 0.3;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  @media(max-width: 768px) {\r\n    padding: 0;\r\n  }\r\n`\r\n\r\nconst TopicContent = styled.div`\r\n  border-radius: 0;\r\n  padding: 25px;\r\n  position: relative;\r\n  box-shadow: var(--talkbubble-shadow) inset;\r\n  height: 15vh;\r\n  margin: 15px;\r\n  border: 0;\r\n  background-color: var(--talkbubble-yellow);\r\n  color: var(--talkbubble-blue);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow-y: scroll;\r\n  -ms-overflow-style: none;  /* IE and Edge */\r\n  scrollbar-width: none;  /* Firefox */\r\n\r\n  @media(max-width: 768px) {    \r\n    border-radius: 0;\r\n    padding: 25px;\r\n    position: relative;\r\n    box-shadow: var(--talkbubble-shadow) inset;\r\n    height: 20vh;\r\n    border: 0;\r\n    background-color: var(--talkbubble-yellow);\r\n    color: var(--talkbubble-blue);\r\n    margin: 15px 0;\r\n  }\r\n`\r\n\r\nconst TopicText = styled.div`\r\n  position: relative;\r\n  text-align: center;\r\n  transition: all 0.4s linear;\r\n  left: 0;\r\n  &.transitioning {\r\n    opacity: 0;\r\n    left: -15px;\r\n  }\r\n`\r\nexport function Topic(props) {\r\n    return(\r\n      <TopicElem>\r\n        <TopicHeader>\r\n          <span>Random Topic:</span>\r\n          <span>Taken from <a target=\"_blank\" href=\"https://www.reddit.com/r/Showerthoughts/\">r/showerthoughts</a></span>\r\n        </TopicHeader>\r\n        <TopicContent className=\"no-scroll\">\r\n          <TopicText className={(props.transitioningTopic ? 'transitioning' : '')}> {props.topic}</TopicText>\r\n        </TopicContent>\r\n      </TopicElem>\r\n    )\r\n  }\r\n  ","C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\feed.js",[],"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\form.js",["64"],"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\room.js",[],"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\options.js",[],"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\post.js",[],"C:\\Users\\cmare\\dev practice\\talkbubble\\talkbubble-client\\src\\components\\member.js",[],["65","66"],{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","severity":1,"message":"72","line":7,"column":8,"nodeType":"73","messageId":"74","endLine":7,"endColumn":12},{"ruleId":"71","severity":1,"message":"75","line":8,"column":17,"nodeType":"73","messageId":"74","endLine":8,"endColumn":25},{"ruleId":"71","severity":1,"message":"76","line":8,"column":27,"nodeType":"73","messageId":"74","endLine":8,"endColumn":36},{"ruleId":"71","severity":1,"message":"77","line":171,"column":11,"nodeType":"73","messageId":"74","endLine":171,"endColumn":17},{"ruleId":"78","severity":1,"message":"79","line":353,"column":14,"nodeType":"80","endLine":353,"endColumn":29},{"ruleId":"78","severity":1,"message":"79","line":354,"column":14,"nodeType":"80","endLine":354,"endColumn":29},{"ruleId":"78","severity":1,"message":"79","line":355,"column":14,"nodeType":"80","endLine":355,"endColumn":29},{"ruleId":"78","severity":1,"message":"79","line":70,"column":31,"nodeType":"80","endLine":70,"endColumn":46},{"ruleId":"81","severity":1,"message":"82","line":129,"column":40,"nodeType":"83","messageId":"84","endLine":129,"endColumn":60},{"ruleId":"67","replacedBy":"85"},{"ruleId":"69","replacedBy":"86"},"no-native-reassign",["87"],"no-negated-in-lhs",["88"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","'useState' is defined but never used.","'useEffect' is defined but never used.","'_state' is assigned a value but never used.","react/jsx-no-target-blank","Using target=\"_blank\" without rel=\"noreferrer\" is a security risk: see https://html.spec.whatwg.org/multipage/links.html#link-type-noopener","JSXAttribute","no-script-url","Script URL is a form of eval.","Literal","unexpectedScriptURL",["87"],["88"],"no-global-assign","no-unsafe-negation"]